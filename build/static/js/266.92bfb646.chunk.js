"use strict";(self.webpackChunknav=self.webpackChunknav||[]).push([[266],{5016:(t,a,s)=>{s.d(a,{Z:()=>C});var e=s(2791),l=s(1564),o=s(528),n=(s(7562),s(7287),s(4867)),c=s(8039),r=s(8024),d=s(4649),i=s(2481),u=s(5960),p=s(3879);const m={lazyData:[],lastDoc:null,endOfCOllection:!1,fetchQuantity:50,totalColCount:0,progress:{success:null,error:null,isPending:null}},y=(t,a)=>{var s;switch(a.type){default:return t;case"PRE_FETCH_SETUP":return{...t,progress:{...t.progress,isPending:!0,error:""}};case"SUCCESS":return console.log("SUCCESS action.payload.data",null===(s=a.payload)||void 0===s?void 0:s.data),{...t,lazyData:a.payload.data,lastDoc:a.payload.lastDoc,progress:{...t.progress,success:!0,isPending:!1}};case"SET_COL_COUNT":return{...t,totalColCount:a.payload};case"ERROR":return{...t,progress:{...t.progress,success:!1,isPending:!1,error:"error fetching lazy load document(s) - ".concat(a.payload)}}}},f=t=>{const{ml1:a,ml2:s,ml3:l}=t,{state:o,dispatch:n}=(0,e.useContext)(p.k),[c,r]=(0,e.useReducer)(y,m),d=(0,e.useRef)(((t,s,e)=>{console.log("fetchData called");const l=(0,i.IO)((0,i.hJ)(u.db,a),(0,i.Xo)("metaData.updatedAtDatetime","desc"),(0,i.e0)(s||"0"),(0,i.b9)(e));return(0,i.cf)(l,(a=>{const s=[];a.forEach((t=>{const a={id:t.id,...t.data()};s.push(a)})),t({type:"SUCCESS",payload:{data:s,lastDoc:a.docs[a.docs.length-1]}}),n({type:"SET_FETCH",payload:!1})}))}));return(0,e.useEffect)((()=>{console.log("lazyState.lastDoc",c.lastDoc);const t=o.fetch&&!c.progress.isPending;console.log("canFetch",t);try{if(t){r({type:"PRE_FETCH_SETUP"});const t=d.current(r,c.lastDoc,c.fetchQuantity);return()=>t}}catch(a){r({type:"ERROR",payload:a.msg})}}),[o.fetch,c]),(0,e.useEffect)((()=>{(async()=>{const t=(0,i.hJ)(u.db,a),s=(await(0,i.Yp)(t)).data().count;r({type:"SET_COL_COUNT",payload:s})})()}),[a]),{fetchData:d,lazyState:c}};var h=s(184);const g=(t,a,s,e,l)=>"asts"===t||"trns"===t?null:(0,h.jsx)(n.Z,{nfd:e,fn:l}),C=t=>{console.log("Asts - props",t);const{ml1:a,tn:s,ml3:n,nfd:i,fn:u}=t,{state:m}=(0,e.useContext)(p.k);(t=>{const{dispatch:a}=(0,e.useContext)(p.k),{ml1:s,ml2:l,ml3:o}=t,{lazyState:n}=f({ml1:s,ml2:l,ml3:o});console.log("lazyState",n);const c=[...new Set(n.lazyData.map((t=>t.astData.astCartegory)))],r=[];c&&c.forEach((t=>{var a;const s=n.lazyData&&(null===(a=n.lazyData.filter((a=>{var s;return(null===a||void 0===a||null===(s=a.astData)||void 0===s?void 0:s.astCartegory)===t})))||void 0===a?void 0:a.length);r.push({name:t,quantity:s})})),(0,e.useEffect)((()=>{a({type:"ASTS_TOTALS",payload:{astsTotal:n.totalColCount,astsArray:r,asts:n.lazyData}})}),[n])})({ml1:a,ml2:s,ml3:n});const{getViewportDimensions:y}=(0,d.T)(),C=y(),{tableFields:D}=(0,r.I)({viewportDimesions:C,ml1:a,ml2:s,ml3:n}),v="undefined"===s?"":s;return(0,h.jsxs)("div",{className:"table ",children:[(0,h.jsxs)("div",{className:"table-header",children:[(0,h.jsx)("div",{className:"th-menu-levels",children:(0,h.jsx)("p",{children:"\n\t\t\t\t\t\t\t".concat(a?"".concat(l.QP.get(a)):"","\n\t\t\t\t\t\t\t").concat(v?"/ ".concat(l.QP.get(v),"s"):""," \n\t\t\t\t\t\t\t").concat(n?"/ ".concat(l.QP.get(n),"s"):"","\n\t\t\t\t\t\t")})}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{})]}),(0,h.jsx)(c.Z,{rowData:m.asts,columnDefs:D,ml1:a,children:(0,h.jsx)(o.Z,{rowData:m.asts,columnDefs:D,ml1:a})}),g(a,0,0,i,u)]})}},8039:(t,a,s)=>{s.d(a,{Z:()=>l});s(2791);var e=s(184);const l=t=>(0,e.jsx)("div",{className:"table-wrapper",children:t.children})},6266:(t,a,s)=>{s.r(a),s.d(a,{default:()=>d});s(2791);var e=s(7689),l=s(5016),o=s(6849),n=s(1466),c=s(8341),r=(s(8360),s(184));const d=()=>{const{ml2:t,ml3:a}=(0,e.UO)(),{user:s,isAuthReady:d}=(0,o.Z)();return d?s?(0,r.jsx)(l.Z,{ml1:"asts",tn:t,ml3:a,nfd:"newAstsFormData",fn:"AstsForm"}):(0,r.jsx)(c.default,{}):(0,r.jsx)("div",{className:"users-list-loader",children:(0,r.jsx)(n.Z,{color:"orange",loading:!d,size:13,"aria-label":"Loading Spinner","data-testid":"loader"})})}},8360:()=>{},7287:()=>{}}]);
//# sourceMappingURL=266.92bfb646.chunk.js.map